<%= form_with(model: template) do |f| %>
  <% if template.errors.any? %>
    <div class="alert alert-danger">
      <h4 class="alert-heading"><%= pluralize(template.errors.count, "error") %> prohibited this template from being saved:</h4>
      <ul>
        <% template.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div class="form-group mb-4">
    <%= f.label :category_id, "カテゴリ", class: 'control-label' %>
    <%= f.select :category_id, categories.collect { |c| [c.name, c.id] }, { prompt: 'カテゴリを選択してください' }, { class: 'form-control' } %>
  </div>
  <div class="form-group mb-4" data-controller="upload-item-preview">
      <%= f.label :template_cover_image, "カバー画像", class: 'control-label d-block' %>
      <%= f.file_field :template_cover_image, accept: 'image/png,image/jpeg', class: 'form-control-file', direct_upload: true, id: 'cover-image-upload', data: { upload_item_preview_target: "input", action: "change->upload-item-preview#previewImage" } %>
      <div class="image-preview mt-3" data-upload-item-preview-target="preview"></div>
  </div>
    <div class="form-group mb-4" data-controller="item-count-checker upload-item-preview">
      <%= f.label :tier_images, "Tier画像", class: 'control-label d-block' %>
      <%= f.file_field :tier_images, accept: 'image/png,image/jpeg,image/webp', class: 'form-control-file', multiple: true, direct_upload: true, id: 'image-upload', data: { item_count_checker_target: "file", upload_item_preview_target: "input", action: "change->item-count-checker#checkFileCount change->upload-item-preview#previewImage" } %>
      <div class="image-preview mt-3" data-upload-item-preview-target="preview"></div>
  </div>
  <div class="form-group mb-4">
    <%= f.label :title, "タイトル", class: 'control-label' %>
    <%= f.text_field :title, class: 'form-control', required: true %>
  </div>
  <div class="form-group mb-4">
    <%= f.label :description, "説明" , class: 'control-label' %>
    <%= f.text_area :description, class: 'form-control' %>
  </div>
    <%= f.submit class: 'btn btn-primary' %>
<% end %>
